{"ast":null,"code":"import _regeneratorRuntime from\"/Users/danielhamam/Desktop/Computer_Programming/Beats Website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/danielhamam/Desktop/Computer_Programming/Beats Website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/danielhamam/Desktop/Computer_Programming/Beats Website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import\"./Dashboard.css\";import{removeToken}from\"../../utils/authManager\";import{useHistory}from\"react-router-dom\";import axios from\"axios\";import{useState,useEffect}from\"react\";import{API_URL}from\"../../config/\";import{getToken}from\"../../utils/authManager\";import Swal from\"sweetalert2\";var Dashboard=function Dashboard(){var history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),contacts=_useState2[0],setContacts=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];useEffect(function(){setLoading(true);axios.get(\"\".concat(API_URL,\"contact/\")).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(response){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setContacts(response.data);case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()).catch(function(err){Swal.fire(\"Something went wrong\",\"\",\"error\");}).finally(function(){setLoading(false);});},[]);var handleLogout=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return removeToken();case 2:history.push(\"/\");case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function handleLogout(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"text-center text-uppercase\"},\" \",/*#__PURE__*/React.createElement(\"strong\",null,\" Dashboard \"),\" \"),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-end align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"btn btn-danger btn-small\",onClick:handleLogout},\"Log Out\")),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"table\"},loading&&/*#__PURE__*/React.createElement(\"div\",{className:\"w-100 d-flex justify-content-center align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"spinner-border\",role:\"status\"},/*#__PURE__*/React.createElement(\"span\",{className:\"sr-only\"},\"Loading...\"))),/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Email\"),/*#__PURE__*/React.createElement(\"th\",null,\"Subject\"),/*#__PURE__*/React.createElement(\"th\",null,\"Message\"))),/*#__PURE__*/React.createElement(\"tbody\",null,contacts.map(function(contact,i){return/*#__PURE__*/React.createElement(\"tr\",{key:i},/*#__PURE__*/React.createElement(\"td\",null,contact.name),/*#__PURE__*/React.createElement(\"td\",null,contact.email),/*#__PURE__*/React.createElement(\"td\",null,contact.subject),/*#__PURE__*/React.createElement(\"td\",null,contact.message));})))));};export default Dashboard;","map":{"version":3,"sources":["/Users/danielhamam/Desktop/Computer_Programming/Beats Website/src/admin/views/dashboard.jsx"],"names":["React","removeToken","useHistory","axios","useState","useEffect","API_URL","getToken","Swal","Dashboard","history","contacts","setContacts","loading","setLoading","get","then","response","data","catch","err","fire","finally","handleLogout","push","map","contact","i","name","email","subject","message"],"mappings":"yhBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,iBAAP,CACA,OAASC,WAAT,KAA4B,yBAA5B,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,OAASC,OAAT,KAAwB,eAAxB,CACA,OAASC,QAAT,KAAyB,yBAAzB,CACA,MAAOC,CAAAA,IAAP,KAAiB,aAAjB,CAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACtB,GAAMC,CAAAA,OAAO,CAAGR,UAAU,EAA1B,CADsB,cAEUE,QAAQ,CAAC,EAAD,CAFlB,wCAEfO,QAFe,eAELC,WAFK,8BAGQR,QAAQ,CAAC,KAAD,CAHhB,yCAGfS,OAHe,eAGNC,UAHM,eAKtBT,SAAS,CAAC,UAAM,CACdS,UAAU,CAAC,IAAD,CAAV,CACAX,KAAK,CACFY,GADH,WACUT,OADV,cAEGU,IAFH,0FAEQ,iBAAOC,QAAP,kHACJL,WAAW,CAACK,QAAQ,CAACC,IAAV,CAAX,CADI,sDAFR,gEAKGC,KALH,CAKS,SAACC,GAAD,CAAS,CACdZ,IAAI,CAACa,IAAL,CAAU,sBAAV,CAAkC,EAAlC,CAAsC,OAAtC,EACD,CAPH,EAQGC,OARH,CAQW,UAAM,CACbR,UAAU,CAAC,KAAD,CAAV,CACD,CAVH,EAWD,CAbQ,CAaN,EAbM,CAAT,CAeA,GAAMS,CAAAA,YAAY,2FAAG,+JACbtB,CAAAA,WAAW,EADE,QAEnBS,OAAO,CAACc,IAAR,CAAa,GAAb,EAFmB,wDAAH,kBAAZD,CAAAA,YAAY,2CAAlB,CAIA,mBACE,2BAAK,SAAS,CAAC,WAAf,eACE,0BAAI,SAAS,CAAC,4BAAd,EACG,GADH,cAEE,gDAFF,CAE+B,GAF/B,CADF,cAKE,2BAAK,SAAS,CAAC,+CAAf,eACE,2BAAK,SAAS,CAAC,0BAAf,CAA0C,OAAO,CAAEA,YAAnD,YADF,CALF,cAUE,8BAVF,cAWE,2BAAK,SAAS,CAAC,OAAf,EACGV,OAAO,eACN,2BAAK,SAAS,CAAC,wDAAf,eACE,2BAAK,SAAS,CAAC,gBAAf,CAAgC,IAAI,CAAC,QAArC,eACE,4BAAM,SAAS,CAAC,SAAhB,eADF,CADF,CAFJ,cAQE,8CACE,8CACE,2CACE,qCADF,cAEE,sCAFF,cAGE,wCAHF,cAIE,wCAJF,CADF,CADF,cASE,iCACGF,QAAQ,CAACc,GAAT,CAAa,SAACC,OAAD,CAAUC,CAAV,qBACZ,0BAAI,GAAG,CAAEA,CAAT,eACE,8BAAKD,OAAO,CAACE,IAAb,CADF,cAEE,8BAAKF,OAAO,CAACG,KAAb,CAFF,cAGE,8BAAKH,OAAO,CAACI,OAAb,CAHF,cAIE,8BAAKJ,OAAO,CAACK,OAAb,CAJF,CADY,EAAb,CADH,CATF,CARF,CAXF,CADF,CA2CD,CAnED,CAqEA,cAAetB,CAAAA,SAAf","sourcesContent":["import React from \"react\";\nimport \"./Dashboard.css\";\nimport { removeToken } from \"../../utils/authManager\";\nimport { useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { useState, useEffect } from \"react\";\nimport { API_URL } from \"../../config/\";\nimport { getToken } from \"../../utils/authManager\";\nimport Swal from \"sweetalert2\";\n\nconst Dashboard = () => {\n  const history = useHistory();\n  const [contacts, setContacts] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    setLoading(true);\n    axios\n      .get(`${API_URL}contact/`)\n      .then(async (response) => {\n        setContacts(response.data);\n      })\n      .catch((err) => {\n        Swal.fire(\"Something went wrong\", \"\", \"error\");\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  }, []);\n\n  const handleLogout = async () => {\n    await removeToken();\n    history.push(\"/\");\n  };\n  return (\n    <div className=\"container\">\n      <h1 className=\"text-center text-uppercase\">\n        {\" \"}\n        <strong> Dashboard </strong>{\" \"}\n      </h1>\n      <div className=\"d-flex justify-content-end align-items-center\">\n        <div className=\"btn btn-danger btn-small\" onClick={handleLogout}>\n          Log Out\n        </div>\n      </div>\n      <hr />\n      <div className=\"table\">\n        {loading && (\n          <div className=\"w-100 d-flex justify-content-center align-items-center\">\n            <div className=\"spinner-border\" role=\"status\">\n              <span className=\"sr-only\">Loading...</span>\n            </div>\n          </div>\n        )}\n        <table>\n          <thead>\n            <tr>\n              <th>Name</th>\n              <th>Email</th>\n              <th>Subject</th>\n              <th>Message</th>\n            </tr>\n          </thead>\n          <tbody>\n            {contacts.map((contact, i) => (\n              <tr key={i}>\n                <td>{contact.name}</td>\n                <td>{contact.email}</td>\n                <td>{contact.subject}</td>\n                <td>{contact.message}</td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n\nexport default Dashboard;\n"]},"metadata":{},"sourceType":"module"}